<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music SVC Demo | Research Showcase</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-dark: #1a1a2e;
            --bg-mid: #16213e;
            --bg-light: #0f3460;
            --accent-primary: #e94560;
            --accent-secondary: #ff6b6b;
            --accent-blue: #3498db;
            --text-main: #ffffff;
            --text-muted: #a0a0a0;
            --card-bg: rgba(255, 255, 255, 0.03);
            --card-border: rgba(255, 255, 255, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-mid) 50%, var(--bg-light) 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-main);
            padding: 40px 20px;
            line-height: 1.6;
            font-size: 14px;
        }

        .container { max-width: 1400px; margin: 0 auto; }

        /* ================= Header ================= */
        header { text-align: center; margin-bottom: 30px; }
        
        h1 { 
            font-size: 1.2rem; 
            font-weight: 800; 
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            white-space: nowrap; 
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 5px;
            padding: 0 10px;
        }

        .subtitle { font-size: 0.85rem; color: var(--text-muted); margin-bottom: 20px;}

        /* ================= Navbar ================= */
        nav {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .nav-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px 30px;
            border-radius: 20px;
            border: 1px solid var(--card-border);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            text-align: center;
            display: inline-block;
        }

        .nav-top {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .nav-bottom {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        nav a { 
            text-decoration: none; 
            color: var(--text-muted); 
            font-weight: 600; 
            padding: 6px 14px;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 0.85rem; 
            display: inline-block;
        }

        nav a:hover { 
            background: var(--accent-primary);
            color: white;
            transform: translateY(-2px);
        }

        .nav-top a { font-size: 0.9rem; color: #fff; }

        /* ================= Content Layout ================= */
        section {
            margin-bottom: 60px;
            scroll-margin-top: 50px;
        }

        h2 { 
            font-size: 1.15rem; 
            margin-bottom: 20px; 
            display: flex; align-items: center; gap: 10px; 
            border-bottom: 1px solid var(--card-border); 
            padding-bottom: 10px;
        }
        
        .info-box {
            background: rgba(0, 0, 0, 0.2);
            border-left: 3px solid var(--accent-primary);
            padding: 20px;
            border-radius: 0 10px 10px 0;
            color: #ddd;
            margin-bottom: 30px;
            text-align: justify;
            font-size: 0.9rem;
            line-height: 1.7;
        }

        /* ================= Case Wrapper ================= */
        .case-wrapper {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 30px rgba(0,0,0,0.1);
        }

        .case-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 15px;
            background: rgba(0,0,0,0.2);
            padding: 8px 12px;
            border-radius: 8px;
        }

        .case-id {
            font-family: 'JetBrains Mono', monospace;
            color: var(--accent-secondary);
            font-weight: bold;
            font-size: 0.8rem;
        }

        .case-annotation {
            color: #81d4fa;
            font-size: 0.85rem;
            font-style: italic;
            flex: 1;
            text-align: right;
            margin-left: 20px;
        }

        .row-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            margin-top: 12px;
            font-weight: 700;
            padding-left: 5px;
            border-left: 3px solid var(--accent-blue);
            line-height: 1;
        }

        /* Row 1: Inputs */
        .inputs-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        /* Row 2: Outputs */
        .outputs-row {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        /* Audio Card */
        .audio-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 12px;
            transition: transform 0.3s;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .audio-card:hover {
            transform: translateY(-3px);
            border-color: rgba(255,255,255,0.3);
        }

        .highlight-card {
            border: 1px solid var(--accent-primary);
            background: rgba(233, 69, 96, 0.05);
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .card-title { 
            font-weight: 600; 
            font-size: 0.85rem;
            color: #fff; 
        }
        
        .tag { 
            font-size: 0.6rem; 
            padding: 2px 6px; 
            border-radius: 10px; 
            font-weight: 700; 
            text-transform: uppercase; 
        }
        .tag.ours { background: var(--accent-primary); color: white; }
        .tag.model { background: #444; color: #aaa; }
        .tag.source { background: var(--accent-blue); color: white; }

        .card-note {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: rgba(0,0,0,0.2);
            padding: 6px;
            border-radius: 5px;
            min-height: 36px;
            display: flex; align-items: center;
            line-height: 1.25;
        }

        audio { width: 100%; height: 26px; filter: invert(1) hue-rotate(180deg) contrast(0.8); opacity: 0.8; }

        /* ================= Spectrograms ================= */
        .spec-section { 
            margin-top: 35px; 
            border-top: 1px solid var(--card-border); 
            padding-top: 20px; 
            background: rgba(0,0,0,0.15);
            padding: 20px;
            border-radius: 12px;
        }
        
        .spec-section h3 {
            font-size: 1.0rem;
            color: var(--text-muted);
            margin-bottom: 15px;
            border-left: 3px solid var(--accent-blue);
            padding-left: 12px;
        }

        .spec-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); 
            gap: 15px; 
        }
        
        .spec-item {
            background: rgba(255,255,255,0.02);
            padding: 8px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            text-align: center;
            transition: transform 0.2s;
        }

        .spec-item:hover {
            transform: scale(1.03);
            border-color: var(--accent-blue);
            z-index: 10;
        }
        
        .spec-item.ours-spec {
            border-color: var(--accent-primary);
            background: rgba(233, 69, 96, 0.08);
        }

        .spec-item img { 
            width: 100%; 
            border-radius: 5px; 
            display: block; 
            margin-bottom: 8px;
            filter: brightness(1.1);
        }
        
        .spec-label { 
            font-size: 0.75rem; 
            color: var(--text-muted); 
            font-weight: 600;
        }

        .error-badge {
            color: var(--accent-secondary);
            font-size: 0.75rem;
            text-align: center;
            border: 1px dashed var(--accent-secondary);
            padding: 5px;
            border-radius: 5px;
        }

        @media (max-width: 1200px) {
            .outputs-row { grid-template-columns: 1fr 1fr; } 
        }
        @media (max-width: 600px) {
            .outputs-row { grid-template-columns: 1fr; }
            .inputs-row { grid-template-columns: 1fr; }
            h1 { font-size: 1.0rem; } 
            h2 { font-size: 1.15rem; } 
            .subtitle { font-size: 0.8rem; }
            .case-annotation { text-align: left; margin-left: 0; margin-top: 10px; font-size: 0.8rem; }
            .nav-container { padding: 10px 15px; width: 100%; }
            .nav-bottom { gap: 8px; }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <header>
            <h1>Aligning Speech-Referenced Zero-Shot Singing Voice Conversion via Singing-Specific Inductive Biases and Post-Training Reinforcement Learning</h1>
            <p class="subtitle">Research Showcase & Audio Demonstrations</p>
        </header>

        <nav>
            <div class="nav-container">
                <div class="nav-top">
                    <a href="#abstract">üìù Abstract</a>
                </div>
                <div class="nav-bottom">
                    <a href="#mix-section">üéµ Mix-Vocal Inference</a>
                    <a href="#speech-section">üó£Ô∏è Speech As Timbre</a>
                    <a href="#sing-section">üé§ Singing As Timbre</a>
                </div>
            </div>
        </nav>

        <section id="abstract">
            <h2>üìù Abstract</h2>
            <div class="info-box">
                Zero-shot singing voice conversion (SVC) has shown strong performance on controlled benchmarks, yet remains unstable in real-world industrial settings. In practice, SVC systems must handle imperfect vocal inputs with residual harmonies and often rely on speech recordings as timbre references. The resulting speech--singing domain mismatch, together with singing‚Äôs sensitivity to pitch-dependent timbre variation, makes it difficult for existing methods to simultaneously achieve robustness and perceptual quality.
                <br><br>
                We propose a real-world robust zero-shot SVC framework that addresses these challenges from three complementary perspectives. First, we introduce robust conditional modeling to alleviate content--timbre entanglement caused by harmony-contaminated inputs. Second, we incorporate singing-specific inductive biases, including an RVC-based timbre shifter and pitch-aware timbre adaptation, to stabilize timbre across pitch variations and preserve perceptually salient high-frequency details. Third, we formulate speech-referenced SVC as a targeted post-training problem and employ a Flow-GRPO-based reinforcement learning scheme to directly optimize multi-objective perceptual rewards under inference-time domain mismatch.
                <br><br>
                Experiments show consistent gains over strong baselines, with subjective naturalness improving by approximately 16.6%--21.0% across clean, mixed-vocal, and speech-referenced settings.
            </div>
            
            <div style="text-align: center;">
                <img src="./image/overview.png" alt="Architecture" style="max-width: 80%; border-radius: 12px; border: 1px solid var(--card-border);" onerror="this.style.display='none'">
            </div>
        </section>

        <section id="mix-section">
            <h2>üéµ Real world Mix-vocal cases</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.9rem;">
                Source vocals derived from practical scenarios containing residual harmonic interference.
            </p>
            <div id="mix-container"></div>
            
            <div class="spec-section">
                <h3>üîç Mix-Vocal Inference (Case: 0b15fd96)</h3>
                <p style="font-size:0.85rem; color:#aaa; margin-bottom:15px;">
                    Comparison of harmonic removal capabilities. Note how <b>Ours</b> maintains the cleanest spectral structure compared to baselines.
                </p>
                <div class="spec-grid">
                    <div class="spec-item"><img src="./spectrograms/mix/source.png" loading="lazy" alt="Source"><div class="spec-label">Source (Mix Vocal)</div></div>
                    <div class="spec-item" style="border-color: #2ecc71;">
                        <img src="./spectrograms/mix/clean_vocal_0b15fd96.png" loading="lazy" alt="Clean Vocal">
                        <div class="spec-label" style="color:#2ecc71;">Source (Clean Vocal)</div>
                    </div>
                    <div class="spec-item"><img src="./spectrograms/mix/FreeSVC.png" loading="lazy" alt="FreeSVC"><div class="spec-label">FreeSVC</div></div>
                    <div class="spec-item"><img src="./spectrograms/mix/Samoye.png" loading="lazy" alt="Samoye"><div class="spec-label">Samoye</div></div>
                    <div class="spec-item"><img src="./spectrograms/mix/Seed-VC.png" loading="lazy" alt="Seed-VC"><div class="spec-label">Seed-VC</div></div>
                    <div class="spec-item ours-spec"><img src="./spectrograms/mix/Ours.png" loading="lazy" alt="Ours"><div class="spec-label" style="color:var(--accent-primary);">Ours (Proposed)</div></div>
                </div>
            </div>
        </section>

        <section id="speech-section">
            <h2>üó£Ô∏è Cases of speech vocal as reference timbre</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.9rem;">
                Zero-Shot SVC using speech recordings as the target timbre reference.
            </p>
            <div id="speech-container"></div>

            <div class="spec-section">
                <h3>üîç Speech Reference (Case: 36966_002)</h3>
                <p style="font-size:0.85rem; color:#aaa; margin-bottom:15px;">
                    Singing pronunciation more consistent with the reference timbre, and with less high-freq artifacts.
                </p>
                <div class="spec-grid">
                    <div class="spec-item"><img src="./spectrograms/speech/source.png" loading="lazy" alt="Source"><div class="spec-label">Source (Vocal)</div></div>
                    <div class="spec-item"><img src="./spectrograms/speech/target.png" loading="lazy" alt="Target"><div class="spec-label">Target (Speech)</div></div>
                    <div class="spec-item"><img src="./spectrograms/speech/FreeSVC.png" loading="lazy" alt="FreeSVC"><div class="spec-label">FreeSVC</div></div>
                    <div class="spec-item"><img src="./spectrograms/speech/Samoye.png" loading="lazy" alt="Samoye"><div class="spec-label">Samoye</div></div>
                    <div class="spec-item"><img src="./spectrograms/speech/Seed-VC.png" loading="lazy" alt="Seed-VC"><div class="spec-label">Seed-VC</div></div>
                    <div class="spec-item ours-spec"><img src="./spectrograms/speech/Ours.png" loading="lazy" alt="Ours"><div class="spec-label" style="color:var(--accent-primary);">Ours (Proposed)</div></div>
                </div>
            </div>
        </section>

        <section id="sing-section">
            <h2>üé§ Cases of singing vocal as reference timbre</h2>
            <p style="color: var(--text-muted); margin-bottom: 20px; font-size: 0.9rem;">
                Zero-Shot Singing Voice Conversion using sing timbre for inference.
            </p>
            <div id="sing-container"></div>

            <div class="spec-section">
                <h3>üîç Singing Vocal Reference (Case: Sample 5)</h3>
                <p style="font-size:0.85rem; color:#aaa; margin-bottom:15px;">
                    Spectrogram comparison showing reconstruction quality of upper harmonics.
                </p>
                <div class="spec-grid">
                    <div class="spec-item"><img src="./spectrograms/sing/source.png" loading="lazy" alt="Source"><div class="spec-label">Source Song</div></div>
                    <div class="spec-item"><img src="./spectrograms/sing/target.png" loading="lazy" alt="Target"><div class="spec-label">Target Timbre</div></div>
                    <div class="spec-item"><img src="./spectrograms/sing/FreeSVC.png" loading="lazy" alt="FreeSVC"><div class="spec-label">FreeSVC</div></div>
                    <div class="spec-item"><img src="./spectrograms/sing/Samoye.png" loading="lazy" alt="Samoye"><div class="spec-label">Samoye</div></div>
                    <div class="spec-item"><img src="./spectrograms/sing/Seed-VC.png" loading="lazy" alt="Seed-VC"><div class="spec-label">Seed-VC</div></div>
                    <div class="spec-item ours-spec"><img src="./spectrograms/sing/Ours.png" loading="lazy" alt="Ours"><div class="spec-label" style="color:var(--accent-primary);">Ours (Proposed)</div></div>
                </div>
            </div>
        </section>

    </div>

    <script>
        const config = {
            mix: {
                root: 'mix', type: 'folder_structure', sourceFile: 'mix_vocal.wav',
                models: [
                    { name: 'FreeSVC', folder: 'freesvc' }, 
                    { name: 'Samoye', folder: 'samoye' }, 
                    { name: 'Seed-VC', folder: 'seed_vc_baseline' }, 
                    { name: 'Ours', folder: 'ours_weight_mul_1951', isOurs: true }
                ],
                annotations: {
                    "00fc7649-8400-4cc9-95a4-1bbd92b0dfd7": "Contains mild vocal doubling and harmonies.",
                    "0b15fd96-4210-4b19-aa49-6a59267d4945": "Contains multiple vocal harmonies. Compared to Seed-VC, our method effectively mitigates this issue.",
                    "0ddbd2e7-ebae-46b3-bf56-45c8e7952fc2": "The sudden pitch fluctuation at the 5th second is successfully eliminated.",
                    "3b813eac-e2e2-4e3d-bd9e-ff20d038b964": "Dense harmonies starting at 5s disrupt Seed-VC; our method remains stable.",
                    "4ab54552-5311-42ae-9196-9fb85ecb9230": "Interleaved lead and backing vocals >10s handled correctly."
                },
                items: [
                    { 
                        id: "00fc7649", 
                        fullId: "00fc7649-8400-4cc9-95a4-1bbd92b0dfd7", 
                        target: "ÈùíÂπ¥Ê¥ªÂäõÂ•≥.wav", 
                        timbreLabel: "Female",
                        card_comments: {
                            "source": "Input contains harmonies",
                            "target": "Reference timbre",
                            "FreeSVC": "Noise sounds in harmonics",
                            "Samoye": "Harmonic artifacts",
                            "Seed-VC": "Relatively clean",
                            "Ours": "Relatively clean"
                        }
                    },
                    { 
                        id: "0b15fd96", 
                        fullId: "0b15fd96-4210-4b19-aa49-6a59267d4945", 
                        target: "Â•≥Á´•.wav", 
                        timbreLabel: "Female",
                        card_comments: {
                            "source": "Heavy vocal doubling",
                            "Ours": "Artifacts removed",
                            "FreeSVC": "Severe pitch errors",
                            "Samoye": "Electronic sounds in harmonics",
                            "Seed-VC": "Frequent pitch errors",
                            "Ours": "Relatively improved"
                        }
                    },
                    { 
                        id: "0ddbd2e7", 
                        fullId: "0ddbd2e7-ebae-46b3-bf56-45c8e7952fc2", 
                        target: "Â•≥Á´•.wav", 
                        timbreLabel: "Female",
                        card_comments: {
                            "source": "Sudden pitch shift at 5s",
                            "FreeSVC": "Pitch errors at 5s",
                            "Samoye": "Background artifacts",
                            "Seed-VC": "Pitch errors at 5s",
                            "Ours": "Relatively improved"
                        }
                    },
                    { 
                        id: "3b813eac", 
                        fullId: "3b813eac-e2e2-4e3d-bd9e-ff20d038b964", 
                        target: "ËÄÅÂπ¥Áî∑1.wav", 
                        timbreLabel: "Male",
                        card_comments: {
                            "FreeSVC": "Choked voice",
                            "Samoye": "Relatively clean",
                            "Seed-VC": "Choked voice",
                            "Ours": "Relatively clean"
                        } 
                    },
                    { 
                        id: "4ab54552", 
                        fullId: "4ab54552-5311-42ae-9196-9fb85ecb9230", 
                        target: "ÈùíÂπ¥Ëß£ËØ¥Áî∑.wav", 
                        timbreLabel: "Male",
                        card_comments: {
                            "FreeSVC": "Audio drop-outs",
                            "Samoye": "Turn-taking errors",
                            "Seed-VC": "Turn-taking errors",
                            "Ours": "Relatively improved"
                        }  
                    }
                ]
            },
            speech: {
                root: 'speech-enhanced', type: 'folder_structure', sourceFile: 'vocals.wav', 
                models: [
                    { name: 'FreeSVC', folder: 'freesvc' }, 
                    { name: 'Samoye', folder: 'samoye' }, 
                    { name: 'Seed-VC', folder: 'seed_vc_baseline' }, 
                    { name: 'Ours', folder: 'ours_weight_mul_1951', isOurs: true }
                ],
                items: [
                    { 
                        id: "36966_002", 
                        fullId: "36966_002", 
                        target: "ita.wav", 
                        sourceOverride: "vocals.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Speech ref.",
                            "FreeSVC": "Distortion",
                            "Samoye": "",
                            "Seed-VC": "",
                            "Ours": "Improved low register"
                        }
                    },
                    { 
                        id: "36966_007", 
                        fullId: "36966_007", 
                        target: "jap.wav", 
                        sourceOverride: "vocals.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Speech ref.",
                            "FreeSVC": "Slightly muffled",
                            "Samoye": "Lacks brightness"
                        } 
                    },
                    { 
                        id: "36967_005", 
                        fullId: "36967_005", 
                        target: "Gretchen.wav", 
                        sourceOverride: "vocals.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Speech ref.",
                            "FreeSVC": "Mild distortion"
                        }  
                    },
                    { 
                        id: "38957_008", 
                        fullId: "38957_008", 
                        target: "YOUTH.wav", 
                        sourceOverride: "vocals.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Speech ref.",
                            "Samoye": "Minor ghosting",
                            "FreeSVC": "Mild distortion"
                        } 
                    },
                    { 
                        id: "39749_008", 
                        fullId: "39749_008", 
                        target: "Arriety.wav", 
                        sourceOverride: "vocals.wav", 
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Speech ref.",
                            "Samoye": "Lacks brightness",
                            "FreeSVC": "Mild distortion"
                        } 
                    }
                ]
            },
            sing: {
                root: 'sing-enhanced', type: 'file_structure',
                models: [
                    { name: 'FreeSVC', folder: 'free-svc' }, 
                    { name: 'Samoye', folder: 'samoye-svc' }, 
                    { name: 'Seed-VC', folder: 'seed-vc' }, 
                    { name: 'Ours', folder: 'ours', isOurs: true }
                ],
                items: [
                    { 
                        id: "Sample 1", 
                        fullId: "1", 
                        filename: "1.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Sing ref.",
                            "Ours": "Tenore Drammatico"
                        }
                    },
                    { 
                        id: "Sample 2", fullId: "2", filename: "2.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Sing ref.",
                            "Ours": "Tenore Spinto"
                        }
                    },
                    { 
                        id: "Sample 3", 
                        fullId: "3", 
                        filename: "3.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Sing ref."
                        }
                    },
                    { 
                        id: "Sample 4", fullId: "4", filename: "4.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Sing ref.",
                            "FreeSVC": "Distortion",
                            "Samoye": "Lacks brightness",
                            "Seed-VC": "Missing breathing pauses"
                        }
                    },
                    { 
                        id: "Sample 5", fullId: "5", filename: "5.wav",
                        card_comments: {
                            "source": "Clean singing input",
                            "target": "Sing ref.",
                            "Ours": "Deeper resonance"
                        }
                    }
                ]
            }
        };

        function renderShowcase(sectionId, taskConfig) {
            const container = document.getElementById(sectionId);
            
            taskConfig.items.forEach(item => {
                const realId = item.fullId || item.id;
                
                // Get comments for this specific item (or empty object if none)
                const comments = item.card_comments || {};

                const caseWrapper = document.createElement('div');
                caseWrapper.className = 'case-wrapper';

                const header = document.createElement('div');
                header.className = 'case-header';
                
                const idSpan = document.createElement('div');
                idSpan.className = 'case-id';
                idSpan.innerHTML = `CASE ID: <span style="color:#fff; font-weight:400;">${item.id}</span>`;
                header.appendChild(idSpan);

                if (taskConfig.annotations && taskConfig.annotations[realId]) {
                    const anno = document.createElement('div');
                    anno.className = 'case-annotation';
                    anno.innerHTML = `üí° ${taskConfig.annotations[realId]}`;
                    header.appendChild(anno);
                }
                caseWrapper.appendChild(header);

                const inputLabel = document.createElement('div');
                inputLabel.className = 'row-label';
                inputLabel.innerText = "Input & Reference";
                caseWrapper.appendChild(inputLabel);

                const inputsRow = document.createElement('div');
                inputsRow.className = 'inputs-row';

                let sourcePath, timbrePath;
                if (taskConfig.type === 'folder_structure') {
                    const sourceName = item.sourceOverride || taskConfig.sourceFile;
                    sourcePath = `./${taskConfig.root}/org/${realId}/${sourceName}`;
                    timbrePath = `./${taskConfig.root}/timbre/${item.target}`;
                } else {
                    sourcePath = `./${taskConfig.root}/org/${item.filename}`;
                    timbrePath = `./${taskConfig.root}/timbre/${item.filename}`;
                }

                // Source Card with Comment Lookup
                inputsRow.appendChild(createCard(
                    'Source Input', 
                    'Source', 
                    sourcePath, 
                    comments['source'] || 'Original Input' 
                ));
                
                // Target Card with Comment Lookup
                const targetDisplay = item.timbreLabel ? item.timbreLabel : `Target: ${item.target || item.filename}`;
                inputsRow.appendChild(createCard(
                    'Target Timbre', 
                    'Reference', 
                    timbrePath, 
                    comments['target'] || targetDisplay 
                ));
                
                caseWrapper.appendChild(inputsRow);

                const outputLabel = document.createElement('div');
                outputLabel.className = 'row-label';
                outputLabel.innerText = "Model Output Comparison";
                caseWrapper.appendChild(outputLabel);

                const outputsRow = document.createElement('div');
                outputsRow.className = 'outputs-row';

                taskConfig.models.forEach(model => {
                    let modelPath;
                    if (taskConfig.type === 'folder_structure') {
                        modelPath = `./${taskConfig.root}/${model.folder}/${realId}/${item.target}`;
                    } else {
                        modelPath = `./${taskConfig.root}/${model.folder}/${item.filename}`;
                    }
                    
                    const defaultText = model.isOurs ? "Proposed Method" : ` `;
                    outputsRow.appendChild(createCard(
                        model.name, 
                        model.isOurs ? 'Ours' : 'Baseline', 
                        modelPath, 
                        comments[model.name] || defaultText, 
                        model.isOurs
                    ));
                });

                caseWrapper.appendChild(outputsRow);
                container.appendChild(caseWrapper);
            });
        }

        function createCard(title, tagText, audioSrc, noteText, isHighlight = false) {
            const card = document.createElement('div');
            card.className = `audio-card ${isHighlight ? 'highlight-card' : ''}`;

            const header = document.createElement('div');
            header.className = 'card-header';
            
            const titleEl = document.createElement('div');
            titleEl.className = 'card-title';
            titleEl.innerText = title;
            
            const tag = document.createElement('span');
            tag.className = `tag ${isHighlight ? 'ours' : (tagText === 'Source' || tagText === 'Reference' ? 'source' : 'model')}`;
            tag.innerText = tagText;

            header.appendChild(titleEl);
            header.appendChild(tag);
            card.appendChild(header);

            const note = document.createElement('div');
            note.className = 'card-note';
            note.innerText = noteText || "-";
            card.appendChild(note);

            const audio = document.createElement('audio');
            audio.controls = true;
            audio.preload = 'none';
            const source = document.createElement('source');
            source.src = audioSrc;
            source.type = 'audio/wav';
            
            source.onerror = function() {
                audio.style.display = 'none';
                const err = document.createElement('div');
                err.className = 'error-badge';
                err.innerText = 'Audio Not Found';
                card.appendChild(err);
            };

            audio.appendChild(source);
            card.appendChild(audio);

            return card;
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderShowcase('mix-container', config.mix);
            renderShowcase('speech-container', config.speech);
            renderShowcase('sing-container', config.sing);
        });
    </script>
</body>
</html>